<script>
let currentRole = null;

function loginAs(role) {
currentRole = role;
document.getElementById("login-screen").classList.add("hidden");
document.getElementById("dashboard").classList.remove("hidden");
renderDashboard();
}

function logout() {
document.getElementById("dashboard").classList.add("hidden");
document.getElementById("login-screen").classList.remove("hidden");
}

function renderDashboard() {
const title = {
mareOwner: "Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„Ú© Ù…Ø§Ø¯ÛŒØ§Ù†",
vet: "Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¯Ø§Ù…Ù¾Ø²Ø´Ú©",
stallionOwner: "Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„Ú© Ø³ÛŒÙ„Ù…ÛŒ"
};
document.getElementById("role-title").innerText = title[currentRole];

const content = document.getElementById("dashboard-content");
content.innerHTML = "";

if (currentRole === "mareOwner") {
content.innerHTML = `
<h3>Ø«Ø¨Øª Ù…Ø§Ø¯ÛŒØ§Ù†</h3>
<form onsubmit="saveMare(event)">
<input type="text" id="mareName" placeholder="Ù†Ø§Ù… Ù…Ø§Ø¯ÛŒØ§Ù†" required>
<input type="number" id="mareAge" placeholder="Ø³Ù†">
<button type="submit">Ø«Ø¨Øª</button>
</form>
<div class="mare-list"></div>
<h3>Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ ØªÙ„Ù‚ÛŒØ­</h3>
<form onsubmit="requestContract(event)">
<input type="text" id="stallionChoice" placeholder="Ù†Ø§Ù… Ø³ÛŒÙ„Ù…ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±" required>
<button type="submit">Ø§Ø±Ø³Ø§Ù„</button>
</form>
`;
showMareList();
}

if (currentRole === "vet") {
content.innerHTML = `
<h3>Ù„ÛŒØ³Øª Ù…Ø§Ø¯ÛŒØ§Ù†â€ŒÙ‡Ø§</h3>
<div class="mare-list"></div>
<h3>Ø«Ø¨Øª Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</h3>
<form onsubmit="saveObservation(event)">
<input type="text" id="targetMare" placeholder="Ù†Ø§Ù… Ù…Ø§Ø¯ÛŒØ§Ù†" required>
<input type="text" id="follicleSize" placeholder="Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ„ÛŒÚ©ÙˆÙ„">
<input type="text" id="uterusStatus" placeholder="ÙˆØ¶Ø¹ÛŒØª Ø±Ø­Ù…">
<button type="submit">Ø«Ø¨Øª</button>
</form>
<div class="timeline">
<div class="timeline-step"><span>Ø¯Ø±Ø®ÙˆØ§Ø³Øª</span></div>
<div class="timeline-step"><span>Ù…Ø¹Ø§ÛŒÙ†Ù‡</span></div>
<div class="timeline-step"><span>Ø§Ø±Ø³Ø§Ù„ Ø§Ø³Ù¾Ø±Ù…</span></div>
<div class="timeline-step"><span>Ù¾Ø§ÛŒØ§Ù†</span></div>
</div>
`;
showMareList();
}

if (currentRole === "stallionOwner") {
content.innerHTML = `
<h3>Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø³Ù¾Ø±Ù…</h3>
<div class="semen-request-list"></div>
<form onsubmit="sendSemen(event)">
<input type="text" id="mareForSemen" placeholder="Ù†Ø§Ù… Ù…Ø§Ø¯ÛŒØ§Ù†" required>
<button type="submit">ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ø±Ø³Ø§Ù„</button>
</form>
`;
showSemenRequests();
}
}

function saveMare(e) {
e.preventDefault();
const mares = JSON.parse(localStorage.getItem("mares") || "[]");
mares.push({ name: document.getElementById("mareName").value, age: document.getElementById("mareAge").value });
localStorage.setItem("mares", JSON.stringify(mares));
showMareList();
e.target.reset();
}

function showMareList() {
const mares = JSON.parse(localStorage.getItem("mares") || "[]");
document.querySelectorAll(".mare-list").forEach(list => {
list.innerHTML = mares.map(m => `<div class="mare">ğŸ ${m.name} (${m.age})</div>`).join("");
});
}

function requestContract(e) {
e.preventDefault();
const requests = JSON.parse(localStorage.getItem("semenRequests") || "[]");
requests.push({ mare: document.getElementById("mareName").value, stallion: document.getElementById("stallionChoice").value });
localStorage.setItem("semenRequests", JSON.stringify(requests));
alert("Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø«Ø¨Øª Ø´Ø¯ Ùˆ Ø¨Ù‡ Ù…Ø§Ù„Ú© Ø³ÛŒÙ„Ù…ÛŒ Ø§Ø±Ø³Ø§Ù„ Ú¯Ø±Ø¯ÛŒØ¯.");
e.target.reset();
}

function saveObservation(e) {
e.preventDefault();
const obs = JSON.parse(localStorage.getItem("observations") || "[]");
obs.push({
mare: document.getElementById("targetMare").value,
follicle: document.getElementById("follicleSize").value,
uterus: document.getElementById("uterusStatus").value
});
localStorage.setItem("observations", JSON.stringify(obs));
alert("Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø«Ø¨Øª Ø´Ø¯.");
e.target.reset();
}

function showSemenRequests() {
const requests = JSON.parse(localStorage.getItem("semenRequests") || "[]");
document.querySelectorAll(".semen-request-list").forEach(list => {
list.innerHTML = requests.map(r => `<div class="semen-request">Ø¨Ø±Ø§ÛŒ Ù…Ø§Ø¯ÛŒØ§Ù†: ${r.mare} | Ø³ÛŒÙ„Ù…ÛŒ: ${r.stallion}</div>`).join("");
});
}

function sendSemen(e) {
e.preventDefault();
alert("Ø§Ø³Ù¾Ø±Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!");
e.target.reset();
}
</script>